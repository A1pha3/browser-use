---
title: "提示词指南"
description: "优化代理提示词的技巧和最佳实践。"
icon: "lightbulb"
---

## 概述

有效的提示词可以显著提高性能并解决库现有的局限性。

## 1. 具体 vs 开放

### ✅ 具体（推荐）

```python
task = """
1. 访问 https://quotes.toscrape.com/
2. 使用 extract 操作查询"前 3 条名人名言及其作者"
3. 使用 write_file 操作将结果保存到 quotes.csv
4. 使用 google search 搜索第一条名言的创作时间
"""
```

### ❌ 开放

```python
task = "去网上赚钱"
```

## 2. 直接引用操作名称

当你确切知道代理应该做什么时，直接引用操作名称：

```python
task = """
1. 使用 search 操作搜索 "Python 教程"
2. 使用 click 操作在新的标签页中打开第一个结果
3. 使用 scroll 操作向下滚动 2 页
4. 使用 extract 操作提取前 5 个项目的名称
5. 如果页面未加载，等待 2 秒，刷新并等待 10 秒
6. 使用 send_keys 操作执行 "Tab Tab ArrowDown Enter"
"""
```

请参阅[可用工具列表](/customize/tools/available)获取完整操作列表。

## 3. 通过键盘导航处理交互问题

有时按钮无法点击（你发现了库的 bug - 请提交问题）。好消息是通常可以使用键盘导航来解决！

```python
task = """
如果提交按钮无法点击：
1. 使用 send_keys 操作执行 "Tab Tab Enter" 来导航和激活
2. 或者使用 send_keys 执行 "ArrowDown ArrowDown Enter" 来提交表单
"""
```

## 4. 自定义操作集成

```python
# 当你有自定义操作时
@controller.action("从验证器应用获取 2FA 验证码")
async def get_2fa_code():
    # 你的实现
    pass

task = """
使用 2FA 登录：
1. 输入用户名/密码
2. 当提示输入 2FA 时，使用 get_2fa_code 操作
3. 切勿尝试手动从页面提取 2FA 验证码
4. 始终使用 get_2fa_code 操作获取验证码
"""
```

## 5. 错误恢复

```python
task = """
鲁棒的数据提取：
1. 访问 openai.com 查找 CEO 信息
2. 如果由于反机器人保护导致导航失败：
   - 使用 google search 查找 CEO
3. 如果页面超时，使用 go_back 并尝试其他方法
"""
```

## 高级技巧

### 1. 分步指令

```python
task = """
第一步：导航到目标页面
1. 使用 navigate 访问 https://example.com
2. 等待页面完全加载

第二步：提取数据
1. 使用 extract 操作提取所有产品信息
2. 将结果保存到文件

第三步：验证结果
1. 读取保存的文件
2. 确认数据完整性
"""
```

### 2. 条件逻辑

```python
task = """
1. 访问登录页面
2. 如果出现验证码：
   - 使用 send_keys 执行 "Tab Tab Tab Tab Enter"
   - 手动完成验证码
   - 继续登录流程
3. 如果没有验证码：
   - 直接输入凭据
   - 点击登录按钮
"""
```

### 3. 验证步骤

```python
task = """
1. 填写注册表单
2. 点击提交按钮
3. 验证：
   - 如果看到"成功"消息：任务完成
   - 如果看到错误消息：根据错误修复表单
   - 如果没有响应：刷新页面重试
"""
```

## 最佳实践总结

| 实践 | 说明 |
|-----|------|
| **具体** | 提供详细、分步的指令 |
| **使用操作名称** | 直接引用可用操作 |
| **添加验证** | 包括检查步骤成功的指令 |
| **处理错误** | 为常见问题添加备用方案 |
| **限制范围** | 将复杂任务分解为多个步骤 |

## 相关资源

- [可用工具列表](/customize/tools/available.mdx)
- [添加工具](/customize/tools/add.mdx)
- [代理基础](./basics.mdx)
